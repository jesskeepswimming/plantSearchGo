{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport * as React from 'react';\nimport { LngLatBounds } from 'mapbox-gl';\nimport Supercluster from 'supercluster';\nimport bbox from '@turf/bbox';\nimport { polygon, featureCollection } from '@turf/helpers';\nimport { withMap } from './context';\n\nvar Cluster = function (_super) {\n  __extends(Cluster, _super);\n\n  function Cluster() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      superC: new Supercluster({\n        radius: _this.props.radius,\n        maxZoom: _this.props.maxZoom,\n        minZoom: _this.props.minZoom,\n        extent: _this.props.extent,\n        nodeSize: _this.props.nodeSize,\n        log: _this.props.log\n      }),\n      clusterPoints: []\n    };\n    _this.featureClusterMap = new WeakMap();\n\n    _this.childrenChange = function (newChildren) {\n      var superC = _this.state.superC;\n      _this.featureClusterMap = new WeakMap();\n\n      var features = _this.childrenToFeatures(newChildren);\n\n      superC.load(features);\n    };\n\n    _this.mapChange = function (forceSetState) {\n      if (forceSetState === void 0) {\n        forceSetState = false;\n      }\n\n      var map = _this.props.map;\n      var _a = _this.state,\n          superC = _a.superC,\n          clusterPoints = _a.clusterPoints;\n      var zoom = map.getZoom();\n      var canvas = map.getCanvas();\n      var w = canvas.width;\n      var h = canvas.height;\n      var upLeft = map.unproject([0, 0]).toArray();\n      var upRight = map.unproject([w, 0]).toArray();\n      var downRight = map.unproject([w, h]).toArray();\n      var downLeft = map.unproject([0, h]).toArray();\n      var newPoints = superC.getClusters(bbox(polygon([[upLeft, upRight, downRight, downLeft, upLeft]])), Math.round(zoom));\n\n      if (newPoints.length !== clusterPoints.length || forceSetState) {\n        _this.setState({\n          clusterPoints: newPoints\n        });\n      }\n    };\n\n    _this.childrenToFeatures = function (children) {\n      return children.map(function (child) {\n        var feature = _this.feature(child && child.props.coordinates);\n\n        _this.featureClusterMap.set(feature, child);\n\n        return feature;\n      });\n    };\n\n    _this.getLeaves = function (feature, limit, offset) {\n      var superC = _this.state.superC;\n      return superC.getLeaves(feature.properties && feature.properties.cluster_id, limit || Infinity, offset).map(function (leave) {\n        return _this.featureClusterMap.get(leave);\n      });\n    };\n\n    _this.zoomToClusterBounds = function (event) {\n      var markers = Array.prototype.slice.call(event.currentTarget.children);\n\n      var marker = _this.findMarkerElement(event.currentTarget, event.target);\n\n      var index = markers.indexOf(marker);\n      var cluster = _this.state.clusterPoints[index];\n\n      if (!cluster.properties || !cluster.properties.cluster_id) {\n        return;\n      }\n\n      var children = _this.state.superC.getLeaves(cluster.properties && cluster.properties.cluster_id, Infinity);\n\n      var childrenBbox = bbox(featureCollection(children));\n\n      _this.props.map.fitBounds(LngLatBounds.convert(childrenBbox), {\n        padding: _this.props.zoomOnClickPadding\n      });\n    };\n\n    return _this;\n  }\n\n  Cluster.prototype.componentDidMount = function () {\n    var _a = this.props,\n        children = _a.children,\n        map = _a.map;\n\n    if (children) {\n      this.childrenChange(children);\n    }\n\n    map.on('move', this.mapChange);\n    map.on('zoom', this.mapChange);\n    this.mapChange();\n  };\n\n  Cluster.prototype.componentWillUnmount = function () {\n    var map = this.props.map;\n    map.off('move', this.mapChange);\n    map.off('zoom', this.mapChange);\n  };\n\n  Cluster.prototype.componentDidUpdate = function (prevProps) {\n    var children = prevProps.children;\n\n    if (children !== this.props.children && this.props.children) {\n      this.childrenChange(this.props.children);\n      this.mapChange(true);\n    }\n  };\n\n  Cluster.prototype.feature = function (coordinates) {\n    return {\n      type: 'Feature',\n      geometry: {\n        type: 'Point',\n        coordinates: coordinates\n      },\n      properties: {}\n    };\n  };\n\n  Cluster.prototype.findMarkerElement = function (target, element) {\n    if (element.parentElement === target) {\n      return element;\n    }\n\n    return this.findMarkerElement(target, element.parentElement);\n  };\n\n  Cluster.prototype.render = function () {\n    var _this = this;\n\n    var _a = this.props,\n        ClusterMarkerFactory = _a.ClusterMarkerFactory,\n        style = _a.style,\n        className = _a.className,\n        tabIndex = _a.tabIndex;\n    var clusterPoints = this.state.clusterPoints;\n    return React.createElement(\"div\", {\n      style: style,\n      className: className,\n      tabIndex: tabIndex,\n      onClick: this.props.zoomOnClick ? this.zoomToClusterBounds : undefined\n    }, clusterPoints.map(function (feature) {\n      if (feature.properties && feature.properties.cluster) {\n        return ClusterMarkerFactory(feature.geometry.coordinates, feature.properties.point_count, _this.getLeaves.bind(_this, feature));\n      }\n\n      return _this.featureClusterMap.get(feature);\n    }));\n  };\n\n  Cluster.defaultProps = {\n    radius: 60,\n    minZoom: 0,\n    maxZoom: 16,\n    extent: 512,\n    nodeSize: 64,\n    log: false,\n    zoomOnClick: false,\n    zoomOnClickPadding: 20\n  };\n  return Cluster;\n}(React.Component);\n\nexport { Cluster };\nexport default withMap(Cluster);","map":{"version":3,"sources":["../src/cluster.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport * as React from 'react';\nimport { LngLatBounds } from 'mapbox-gl';\nimport Supercluster from 'supercluster';\nimport bbox from '@turf/bbox';\nimport { polygon, featureCollection } from '@turf/helpers';\nimport { withMap } from './context';\nvar Cluster = (function (_super) {\n    __extends(Cluster, _super);\n    function Cluster() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.state = {\n            superC: new Supercluster({\n                radius: _this.props.radius,\n                maxZoom: _this.props.maxZoom,\n                minZoom: _this.props.minZoom,\n                extent: _this.props.extent,\n                nodeSize: _this.props.nodeSize,\n                log: _this.props.log\n            }),\n            clusterPoints: []\n        };\n        _this.featureClusterMap = new WeakMap();\n        _this.childrenChange = function (newChildren) {\n            var superC = _this.state.superC;\n            _this.featureClusterMap = new WeakMap();\n            var features = _this.childrenToFeatures(newChildren);\n            superC.load(features);\n        };\n        _this.mapChange = function (forceSetState) {\n            if (forceSetState === void 0) { forceSetState = false; }\n            var map = _this.props.map;\n            var _a = _this.state, superC = _a.superC, clusterPoints = _a.clusterPoints;\n            var zoom = map.getZoom();\n            var canvas = map.getCanvas();\n            var w = canvas.width;\n            var h = canvas.height;\n            var upLeft = map.unproject([0, 0]).toArray();\n            var upRight = map.unproject([w, 0]).toArray();\n            var downRight = map.unproject([w, h]).toArray();\n            var downLeft = map.unproject([0, h]).toArray();\n            var newPoints = superC.getClusters(bbox(polygon([[upLeft, upRight, downRight, downLeft, upLeft]])), Math.round(zoom));\n            if (newPoints.length !== clusterPoints.length || forceSetState) {\n                _this.setState({ clusterPoints: newPoints });\n            }\n        };\n        _this.childrenToFeatures = function (children) {\n            return children.map(function (child) {\n                var feature = _this.feature(child && child.props.coordinates);\n                _this.featureClusterMap.set(feature, child);\n                return feature;\n            });\n        };\n        _this.getLeaves = function (feature, limit, offset) {\n            var superC = _this.state.superC;\n            return superC\n                .getLeaves(feature.properties && feature.properties.cluster_id, limit || Infinity, offset)\n                .map(function (leave) { return _this.featureClusterMap.get(leave); });\n        };\n        _this.zoomToClusterBounds = function (event) {\n            var markers = Array.prototype.slice.call(event.currentTarget.children);\n            var marker = _this.findMarkerElement(event.currentTarget, event.target);\n            var index = markers.indexOf(marker);\n            var cluster = _this.state.clusterPoints[index];\n            if (!cluster.properties || !cluster.properties.cluster_id) {\n                return;\n            }\n            var children = _this.state.superC.getLeaves(cluster.properties && cluster.properties.cluster_id, Infinity);\n            var childrenBbox = bbox(featureCollection(children));\n            _this.props.map.fitBounds(LngLatBounds.convert(childrenBbox), {\n                padding: _this.props.zoomOnClickPadding\n            });\n        };\n        return _this;\n    }\n    Cluster.prototype.componentDidMount = function () {\n        var _a = this.props, children = _a.children, map = _a.map;\n        if (children) {\n            this.childrenChange(children);\n        }\n        map.on('move', this.mapChange);\n        map.on('zoom', this.mapChange);\n        this.mapChange();\n    };\n    Cluster.prototype.componentWillUnmount = function () {\n        var map = this.props.map;\n        map.off('move', this.mapChange);\n        map.off('zoom', this.mapChange);\n    };\n    Cluster.prototype.componentDidUpdate = function (prevProps) {\n        var children = prevProps.children;\n        if (children !== this.props.children && this.props.children) {\n            this.childrenChange(this.props.children);\n            this.mapChange(true);\n        }\n    };\n    Cluster.prototype.feature = function (coordinates) {\n        return {\n            type: 'Feature',\n            geometry: {\n                type: 'Point',\n                coordinates: coordinates\n            },\n            properties: {}\n        };\n    };\n    Cluster.prototype.findMarkerElement = function (target, element) {\n        if (element.parentElement === target) {\n            return element;\n        }\n        return this.findMarkerElement(target, element.parentElement);\n    };\n    Cluster.prototype.render = function () {\n        var _this = this;\n        var _a = this.props, ClusterMarkerFactory = _a.ClusterMarkerFactory, style = _a.style, className = _a.className, tabIndex = _a.tabIndex;\n        var clusterPoints = this.state.clusterPoints;\n        return (React.createElement(\"div\", { style: style, className: className, tabIndex: tabIndex, onClick: this.props.zoomOnClick ? this.zoomToClusterBounds : undefined }, clusterPoints.map(function (feature) {\n            if (feature.properties && feature.properties.cluster) {\n                return ClusterMarkerFactory(feature.geometry.coordinates, feature.properties.point_count, _this.getLeaves.bind(_this, feature));\n            }\n            return _this.featureClusterMap.get(feature);\n        })));\n    };\n    Cluster.defaultProps = {\n        radius: 60,\n        minZoom: 0,\n        maxZoom: 16,\n        extent: 512,\n        nodeSize: 64,\n        log: false,\n        zoomOnClick: false,\n        zoomOnClickPadding: 20\n    };\n    return Cluster;\n}(React.Component));\nexport { Cluster };\nexport default withMap(Cluster);\n//# sourceMappingURL=cluster.js.map"]},"metadata":{},"sourceType":"module"}